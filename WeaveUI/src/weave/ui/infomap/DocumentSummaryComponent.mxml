<?xml version="1.0" encoding="utf-8"?>
<mx:VBox xmlns:mx="http://www.adobe.com/2006/mxml"
			 xmlns:infomap="weave.ui.infomap.*" 
			 width="100%" height="100%" 
			 verticalScrollPolicy="off" 
			 horizontalScrollPolicy="off" 
			 paddingLeft="5" paddingRight="5" paddingTop="5" paddingBottom="5"
			 >
		<mx:Script >
			<![CDATA[
				import flash.events.MouseEvent;
				import flash.events.TimerEvent;
				import flash.geom.Point;
				import flash.utils.Timer;
				
				import mx.containers.Canvas;
				import mx.core.IToolTip;
				import mx.core.UIComponent;
				import mx.events.FlexEvent;
				import mx.managers.PopUpManager;
				import mx.rpc.events.FaultEvent;
				import mx.rpc.events.ResultEvent;
				
				import weave.api.WeaveAPI;

				
				[Bindable] public var nodeDescriptionText:String;
				[Bindable] public var nodeTitleText:String;
				[Bindable] public var nodeFullStoryHtmlText:String;
				[Bindable] public var nodeTimeStampText:String;
				
				override protected function childrenCreated():void
				{
					super.childrenCreated();
					
					this.setStyle("backgroundColor",0xEDE6E6);
					this.setStyle("borderStyle","solid");
					this.setStyle("borderColor",0xC40202);
					this.setStyle("cornerRadius",10);
					this.setStyle("borderThickness",2);
					this.maxWidth = 250;
					this.maxHeight = 300;
				}
				
				override public function set data(doc:Object):void
				{
					super.data = doc;
					WeaveAPI.URLRequestUtils.getContent(new URLRequest(doc.imgName),handleImage,handleNoImage,doc.imgName);
				}
				
				private function handleImage(event:ResultEvent,token:Object=null):void
				{
					if(token==data.imgName)
						(nodeThumbnail as Image).source = new Bitmap((event.result as Bitmap).bitmapData);

				}
				
				[@Embed(source='/weave/resources/images/no-image.gif')]
				private var _noImage:Class;
				
				private function handleNoImage(event:FaultEvent,token:Object=null):void
				{
						(nodeThumbnail as Image).source = _noImage;
				}
				
			]]>
		</mx:Script>
		<mx:Text id="nodeTitle" fontWeight="bold" width="100%" text="{data.title}"/>
		<!--<mx:HRule width="100%"/>-->
		<mx:HBox width="100%" verticalScrollPolicy="off" horizontalScrollPolicy="off">
			<mx:Image id="nodeThumbnail" maintainAspectRatio="false" maxWidth="140" maxHeight="140"/>
			<!--<mx:VRule height="100%"/>-->
				<!--setting the description to be a maximum of 200 characters. If it is high then the rendering is not smooth-->
			<mx:Text id="nodeDescription" width="100%" height="100%" text="{(data.description as String).substr(0,400)}" />
			
		</mx:HBox>
		
		<mx:HRule width="100%"/>
		<!--<mx:Text id="nodeFullStory" color="0x00ff00" fontWeight="bold" width="100%" height="5%" htmlText="{nodeFullStoryHtmlText}" />-->
		<mx:Text id="nodeTimeStamp" fontWeight="bold" width="100%" height="5%" text="{data.datePub}" />
		
	</mx:VBox>

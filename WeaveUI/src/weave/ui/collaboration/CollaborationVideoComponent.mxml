<?xml version="1.0" encoding="utf-8"?>
<mx:Canvas xmlns:mx="http://www.adobe.com/2006/mxml"
		   width="100" height="80" borderColor="#54585E" borderStyle="solid" borderThickness="3"
		   creationComplete="creationComplete(event)" creationPolicy="all">
	<mx:VBox width="100%" height="100%">
		<mx:UIComponent id="videoArea" width="100%" height="100%"/>
		<mx:Label id="nameLabel" width="100%" height="3%"/>
	</mx:VBox>	
	
	<mx:Script>
		<![CDATA[
			import mx.events.FlexEvent;

			public var stream:NetStream = null;
			public var video:Video = new Video();
			public static var defaultHeight:Number = 80;
			public static var defaultWidth:Number = 100;
			private var _labelText:String;
			
			public function set labelText(id:String):void
			{
				_labelText = id;
				invalidateProperties();
			}
			
			override protected function commitProperties():void
			{
				super.commitProperties();
				nameLabel.text = _labelText;
			}
			
			public function play(str:String):void
			{
				stream.play(str);
				video.attachNetStream(stream);
			}
			public function close():void
			{
				video.attachNetStream(null);
				video.clear();
				if( stream != null )
					stream.close();
			}
			
			protected function creationComplete(event:FlexEvent):void
			{
				video.height = videoArea.height;
				video.width = videoArea.width;
				videoArea.addChild(video);
			}
			
			public function adjustCamera():void
			{
				if( videoArea != null )
				{
					video.height = videoArea.height;
					video.width = videoArea.width;
				}
			}
			
		]]>
	</mx:Script>
	
</mx:Canvas>
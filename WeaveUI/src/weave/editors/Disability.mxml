<?xml version="1.0" encoding="utf-8"?>
<!--
/*
Weave (Web-based Analysis and Visualization Environment)
Copyright (C) 2008-2011 University of Massachusetts Lowell

This file is a part of Weave.

Weave is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License, Version 3,
as published by the Free Software Foundation.

Weave is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with Weave.  If not, see <http://www.gnu.org/licenses/>.
*/
-->

<!---
@author fkamayou
@author mervetuccar
@author hgranz
@spurushe
-->

<mx:VBox xmlns:mx="http://www.adobe.com/2006/mxml" width="400" height="300"		 
		 xmlns="weave.editors.*"
		 xmlns:ui="weave.ui.*"
		 label="Alt Text"
		 implements="weave.api.core.ILinkableObject"
		 enabled="{_tool != null}" xmlns:s="library://ns.adobe.com/flex/spark">
	
	<mx:Label text="Custom description:"
			  textAlign="left"/>
	
	<mx:TextArea id="customDescriptionTextBox" 
				 width="80%" 
				 height="30%" 
				 minWidth="5" 
				 minHeight="5"
				 borderStyle="solid" 
				 editable="true"  
				 toolTip="Enter a custom description here for the visualization."
				 wordWrap="true"
				 creationComplete="linkBindableProperty(customDescription, event.target, 'text')"/>
	
	<mx:Label text="Automatic description:"
			  textAlign="left"/>
	
	<mx:HBox width="100%" height="30%">
		<mx:TextArea id="automaticDescriptionTextBox" 
					 width="95%" 
					 height="100%" 
					 minWidth="5" 
					 minHeight="5"
					 borderStyle="solid" 
					 editable="true"  
					 toolTip="System generated description."
					 wordWrap="true" 
					 creationComplete="linkBindableProperty(automaticDescription, event.target, 'text')"/>
		
		<mx:Button label="Refresh"
				   id="automaticDescRefreshButton" 
				   click="updateAutomaticDescription();"
				   />
	</mx:HBox>
	
	<mx:Label text="Tool description:"
			  textAlign="left"/>
	
	<mx:HBox width="100%" height="30%">
		<mx:TextArea id="toolDescriptionTextBox" 
					 width="100%" 
					 height="100%" 
					 minWidth="5" 
					 minHeight="5"
					 borderStyle="solid" 
					 editable="false"  
					 toolTip="The text here will be used for the tool description."
					 wordWrap="true"
					 creationComplete="linkBindableProperty(toolDescription, event.target, 'text')"/>

		
		<mx:VBox>
			<mx:RadioButtonGroup id="textOption" itemClick="updateToolDescription()"/>
			<mx:RadioButton paddingLeft="10" groupName="textOption" label="Custom" id="customDescriptionRadioButton"/>
			<mx:RadioButton paddingLeft="10" groupName="textOption" label="Automatic" id="automaticDescriptionRadioButton"/>
			
		</mx:VBox>
	</mx:HBox>
	

	<mx:Script>
		<![CDATA[
			import disabilityDictionary.DisabilityMessageCategoryDictionary;
			import disabilityDictionary.DisabilityMessageProperties;
			import disabilityDictionary.DisabilityObject;
			
			import mx.accessibility.CheckBoxAccImpl;
			import mx.binding.utils.BindingUtils;
			import mx.controls.Alert;
			import mx.controls.Menu;
			import mx.controls.TextArea;
			import mx.core.IUIComponent;
			import mx.core.UIComponent;
			import mx.events.DragEvent;
			import mx.events.FlexEvent;
			import mx.managers.DragManager;
			import mx.rpc.AsyncToken;
			import mx.rpc.events.FaultEvent;
			import mx.rpc.events.ResultEvent;
			
			import weave.Weave;
			import weave.api.WeaveAPI;
			import weave.api.core.ILinkableObject;
			import weave.api.data.IAttributeColumn;
			import weave.api.linkBindableProperty;
			import weave.api.newLinkableChild;
			import weave.api.registerLinkableChild;
			import weave.api.reportError;
			import weave.api.setSessionState;
			import weave.api.ui.IAltText;
			import weave.api.ui.ILinkableObjectEditor;
			import weave.api.ui.IPlotter;
			import weave.api.unlinkBindableProperty;
			import weave.api.unlinkSessionState;
			import weave.core.LinkableBoolean;
			import weave.core.LinkableHashMap;
			import weave.core.LinkableString;
			import weave.data.KeySets.KeySet;
			import weave.services.DelayedAsyncInvocation;
			import weave.services.DelayedAsyncResponder;
			import weave.services.WeaveRServlet;
			import weave.services.beans.RResult;
			import weave.ui.ControlPanel;
			import weave.ui.DisabilityOptions;
			import weave.ui.DraggablePanel;
			import weave.utils.ColumnUtils;
			import weave.utils.LinkableTextFormat;
			import weave.visualization.layers.PlotManager;
			import weave.visualization.layers.Visualization;
			
			
			[Bindable] private var _tool:IAltText = null;
			
			public const automaticDescription:LinkableString = registerLinkableChild(this,new LinkableString());
			public const customDescription:LinkableString = registerLinkableChild(this,new LinkableString());
			public const toolDescription:LinkableString = registerLinkableChild(this,new LinkableString());
			public const includeInDesc:LinkableBoolean = registerLinkableChild(this, new LinkableBoolean("false"));
			
			public function set target(tool:IAltText):void
			{
				_tool = tool;
			}

			override protected function childrenCreated():void
			{
				super.childrenCreated();
				
			}
				
			private function updateAutomaticDescription():void
			{
				_tool.updateAltText();
			}
			
			private function updateToolDescription():void
			{
				if (textOption.selectedValue == customDescriptionRadioButton.label)
				{
					toolDescription.value = customDescription.value; 
				} 

				else if (textOption.selectedValue == automaticDescriptionRadioButton.label)
				{
					toolDescription.value = automaticDescription.value;
				} 
			}
			
		]]>
	</mx:Script>
</mx:VBox>

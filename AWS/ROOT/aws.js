var aws={client:{}};aws.client.queryService=function(a,b,c,d,e){$.post(a,JSON.stringify({jsonrpc:"2.0",id:e||"no_id",method:b,params:c}),function(a){a.error?alert(JSON.stringify(a,null,3)):d&&d(a.result,e)},"json")};aws.client.DataClient={};var dataServiceURL="/WeaveServices/DataService";aws.client.DataClient.getDataTableList=function(a){aws.client.queryService(dataServiceURL,"getDataTableList",null,a)};aws.client.DataClient.getEntityChildIds=function(a,b){aws.client.queryService(dataServiceURL,"getEntityChildIds",[a],b)};aws.client.DataClient.getDataColumnEntities=function(a,b){aws.client.queryService(dataServiceURL,"getEntitiesById",[a],b)};
aws.client.DataClient.getColumn=function(a,b,c,d,e){aws.client.queryService(dataServiceURL,"getColumn",[a,b,c,d],e)};aws.client.LiveQuery=function(a,b,c){this.busy=!1;this.listeners=[];this.waiters=[];this.result=null;this.url=a;this.method=b;this.params=null;this.last_id=0;this.setParams(c)};
aws.client.LiveQuery.prototype.setParams=function(a){if(aws.client.LiveQuery.detectParamChange(this.params,a)){if(this.params)for(var b in a)this.params[b]=a[b];else this.params=a;this.busy=!0;var c=this;aws.client.queryService(this.url,this.method,this.params,function(a,b){if(b==c.last_id){c.busy=!1;c.result=a;for(var d in c.listeners)c.listeners[d].call(c,c.result);for(var f in c.waiters)c.waiters[f].call(c,c.busy)}},++this.last_id);for(var d in this.waiters)this.waiters[d].call(this,this.busy)}};
aws.client.LiveQuery.prototype.listen=function(a,b){this.listeners.push(a);!1!==b&&(this.busy||a.call(this,this.result))};aws.client.LiveQuery.prototype.wait=function(a,b){this.waiters.push(a);!1!==b&&a.call(this,this.busy)};aws.client.LiveQuery.prototype.unlisten=function(a){delete this.listeners[this.listeners.indexOf(a)]};aws.client.LiveQuery.prototype.unwait=function(a){delete this.waiters[this.waiters.indexOf(a)]};
aws.client.LiveQuery.detectParamChange=function(a,b){void 0===a&&(a=null);void 0===b&&(b=null);var c=typeof a;if(c!=typeof b)return!0;if("object"!=c)return String(a)!=String(b);if(!a!=!b)return!0;for(var d in b)if(aws.client.LiveQuery.detectParamChange(a[d],b[d]))return!0;return!1};
aws.client.LiveQuery.test=function(){var a=function(b){this.setParams({publicMetadata:{keyType:"test1"}});this.unlisten(a)},b=new aws.client.LiveQuery("/WeaveServices/DataService","getEntityIdsByMetadata",{entityType:1,publicMetadata:{keyType:"test"}});b.wait(function(a){console.log("RPC busy: ",a,"; params: ",JSON.stringify(this.params))});b.listen(function(a){console.log("result: ",JSON.stringify(a))});b.listen(a)};aws.client.RClient={};var rServiceURL="/WeaveServices/RService",adminServiceURL="/WeaveServices/AdminService",connectionObject;aws.client.RClient.runScriptOnSQLdata=function(a,b,c){aws.client.queryService(rServiceURL,"runScriptOnSQLOnServer",[a,b],c)};aws.client.RClient.getConnectionObject=function(a,b,c){aws.client.queryService(adminServiceURL,"getConnectionInfo",[a,b],c)};aws.client.RClient.storeConnection=function(a,b){connectionObject=a};
aws.client.RClient.writeResultsToDatabase=function(a,b){aws.client.queryService(rServiceURL,"writeResultsToDatabase",a,b)};aws.client.RClient.displayWritingStatus=function(a,b){};aws.client.RClient.displayResultsInViz=function(a){};aws.client.RClient.retriveResultsFromDatabase=function(a){};